{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import { useRef, useLayoutEffect } from 'react'\nimport EventEmitter from 'events'\n\nexport const emitter = new EventEmitter()\n\nconst useEventListener = (\n  { listeners = {}, removeListeners = {}, params = {} },\n  deps = []\n) => {\n  useLayoutEffect(() => {\n    const names = Object.keys(listeners)\n\n    if (names?.length) {\n      const callbacks = {}\n\n      names.map((name) => {\n        const callback = (...payloads) => {\n          const listener = listeners[name]\n          return listener && listener(...payloads, params)\n        }\n\n        emitter.on(name, callback)\n        callbacks[name] = callback\n      })\n\n      return () =>\n        names.map((name) => {\n          emitter.removeListener(name, callbacks[name])\n          removeListeners[name] && removeListeners[name]()\n        })\n    }\n  }, deps)\n\n  return emitter\n}\n\nexport const useEmitter = () => useRef(emitter).current\n\nexport default useEventListener\n"],"names":["emitter","EventEmitter","useEmitter","useRef","current","deps","listeners","removeListeners","params","useLayoutEffect","names","Object","keys","length","callbacks","map","name","callback","listener","payloads","on","removeListener"],"mappings":"0EAGaA,IAAAA,EAAU,IAAIC,EAiCdC,EAAa,kBAAMC,EAAOH,GAASI,wBA/BvB,WAEvBC,WADEC,UAAAA,aAAY,SAAIC,gBAAAA,aAAkB,SAAIC,OAAAA,aAAS,KA2BjD,gBA1BAH,IAAAA,EAAO,IAEPI,EAAgB,WACd,IAAMC,EAAQC,OAAOC,KAAKN,GAE1B,GAAII,MAAAA,GAAAA,EAAOG,OAAQ,CACjB,IAAMC,EAAY,GAYlB,OAVAJ,EAAMK,IAAI,SAACC,GACT,IAAMC,EAAW,WAAiB,IAChC,IAAMC,EAAWZ,EAAUU,sBADRG,2BAAAA,kBAEnB,OAAOD,GAAYA,eAAYC,UAAUX,MAG3CR,EAAQoB,GAAGJ,EAAMC,GACjBH,EAAUE,GAAQC,sBAIlBP,EAAMK,IAAI,SAACC,GACThB,EAAQqB,eAAeL,EAAMF,EAAUE,IACvCT,EAAgBS,IAAST,EAAgBS,UAG9CX,GAEIL"}